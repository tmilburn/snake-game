<!DOCTYPE html>
<html>
<body>

<canvas id="snakeCanvas" width="384" height="260"
style="border:1px solid #c3c3c3;"></canvas>

<script>

var canvas = document.getElementById("snakeCanvas");
var ctx = canvas.getContext("2d");
ctx.scale(4, 4);
ctx.fillStyle = "#222";
ctx.strokeStyle = "#222";
ctx.beginPath();
ctx.rect(1, 10, 94, 54);
ctx.stroke();
const gridPattern = "    "
                  + " ## "
                  + " ## "
                  + "    ";                         
function drawGrid(pattern, x, y)
{
    // Clear the square
    ctx.fillStyle = "#fff";
    ctx.fillRect(2 + (x*4), 11 + (y*4), 4, 4);
    
    // Print the pattern
    ctx.fillStyle = "#222";
    for (var i = 0; i < pattern.length; i++)
    {
        var c = pattern.charAt(i);
        if(c == "#")
        {
            ctx.fillRect(2 + (x*4) + (i%4), 11 + (y*4) + Math.floor(i/4), 1, 1);
        }
    }
}

var lastPressedKey = "";

document.addEventListener('keydown', function(event) {
    var code = event.keyCode;
    switch(code) {
    case 37:
        lastPressedKey = 'LEFT';
        break;
    case 38:
        lastPressedKey = 'UP';
        break;
    case 39:
        lastPressedKey = 'RIGHT';
        break;
    case 40:
        lastPressedKey = 'DOWN';
        break;
    }
});

var playerX = 0;
var playerY = 0;

mainLoop();

function mainLoop()
{
    if(lastPressedKey == 'DOWN')
    {
        playerY = (playerY + 1) % 13;
    }
    else if(lastPressedKey == 'UP')
    {
        playerY--;
        if(playerY == -1)
        {
            playerY += 13;
        }
    }
    else if(lastPressedKey == 'RIGHT')
    {
        playerX = (playerX + 1) % 23;
    }
    else if(lastPressedKey == 'LEFT')
    {
        playerX--;
        if(playerX == -1)
        {
          playerX += 23;
        }
    }
    lastPressedKey = "";
    drawGrid(gridPattern, playerX, playerY);
    setTimeout(mainLoop, 100);
};
</script>

</body>
</html>
